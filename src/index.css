@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================================================
   DESIGN TOKENS — Semantic color system
   
   All UI components reference these tokens.
   The only difference between themes is here.
   ================================================================ */

/* ===== Dark Theme (default) ===== */
:root {
  color-scheme: dark;

  /* Backgrounds */
  --bg: #0d1117;
  --bg-subtle: #161b22;
  --bg-inset: #010409;
  --bg-overlay: rgba(0, 0, 0, 0.5);

  /* Surfaces (cards, panels) */
  --surface: #161b22;
  --surface-hover: #1c2128;
  --surface-active: #21262d;

  /* Foreground (text) */
  --fg: #e6edf3;
  --fg-secondary: #8b949e;
  --fg-muted: #484f58;
  --fg-on-accent: #ffffff;

  /* Borders */
  --border: #30363d;
  --border-subtle: #21262d;

  /* Status badges — fixed across themes */
  --badge-pass-bg: rgba(16, 185, 129, 0.15);
  --badge-pass-text: #34d399;
  --badge-pass-border: rgba(16, 185, 129, 0.3);

  --badge-fail-bg: rgba(248, 113, 113, 0.15);
  --badge-fail-text: #f87171;
  --badge-fail-border: rgba(248, 113, 113, 0.3);

  --badge-warn-bg: rgba(251, 191, 36, 0.15);
  --badge-warn-text: #fbbf24;
  --badge-warn-border: rgba(251, 191, 36, 0.3);

  /* Progress bar */
  --bar-track: #21262d;
  --bar-created: #484f58;
  --bar-executed: #6366f1;

  /* Cards & Popover */
  --bg-card: #1c2128;
  --shadow: rgba(0, 0, 0, 0.4);

  /* Primary accent */
  --primary: #6366f1;
  --primary-subtle: rgba(99, 102, 241, 0.15);

  /* Gradient background glow */
  --glow-1: rgba(99, 102, 241, 0.12);
  --glow-2: rgba(168, 85, 247, 0.08);
}

/* ===== Light Theme ===== */
.light {
  color-scheme: light;

  /* Backgrounds — GitHub-inspired */
  --bg: #ffffff;
  --bg-subtle: #f6f8fa;
  --bg-inset: #eff2f5;
  --bg-overlay: rgba(0, 0, 0, 0.3);

  /* Surfaces */
  --surface: #ffffff;
  --surface-hover: #f3f4f6;
  --surface-active: #ebedf0;

  /* Foreground */
  --fg: #1f2328;
  --fg-secondary: #59636e;
  --fg-muted: #8c959f;
  --fg-on-accent: #ffffff;

  /* Borders */
  --border: #d1d9e0;
  --border-subtle: #e8ecf0;

  /* Status badges */
  --badge-pass-bg: rgba(16, 185, 129, 0.1);
  --badge-pass-text: #059669;
  --badge-pass-border: rgba(16, 185, 129, 0.25);

  --badge-fail-bg: rgba(239, 68, 68, 0.1);
  --badge-fail-text: #dc2626;
  --badge-fail-border: rgba(239, 68, 68, 0.25);

  --badge-warn-bg: rgba(245, 158, 11, 0.1);
  --badge-warn-text: #d97706;
  --badge-warn-border: rgba(245, 158, 11, 0.25);

  /* Progress bar */
  --bar-track: #e5e7eb;
  --bar-created: #d1d5db;
  --bar-executed: #6366f1;

  /* Cards & Popover */
  --bg-card: #ffffff;
  --shadow: rgba(0, 0, 0, 0.1);

  /* Primary accent */
  --primary: #6366f1;
  --primary-subtle: rgba(99, 102, 241, 0.08);

  /* Gradient background glow */
  --glow-1: rgba(99, 102, 241, 0.06);
  --glow-2: rgba(168, 85, 247, 0.04);
}

/* ================================================================
   VS Code Webview Theme Override
   
   When running inside VS Code, map VS Code's theme variables
   to our semantic tokens. This makes the app auto-follow the
   VS Code color theme.
   ================================================================ */

body.vscode-dark {
  --bg: var(--vscode-editor-background, #1e1e1e);
  --bg-subtle: var(--vscode-sideBar-background, #252526);
  --bg-inset: var(--vscode-input-background, #3c3c3c);
  --surface: var(--vscode-sideBar-background, #252526);
  --surface-hover: var(--vscode-list-hoverBackground, #2a2d2e);
  --surface-active: var(--vscode-list-activeSelectionBackground, #094771);
  --fg: var(--vscode-editor-foreground, #cccccc);
  --fg-secondary: var(--vscode-descriptionForeground, #a0a0a0);
  --fg-muted: var(--vscode-disabledForeground, #6a6a6a);
  --border: var(--vscode-panel-border, #3c3c3c);
  --border-subtle: var(--vscode-widget-border, #2b2b2b);
  --bg-card: var(--vscode-editorWidget-background, #252526);
  --shadow: rgba(0, 0, 0, 0.5);
}

body.vscode-light {
  --bg: var(--vscode-editor-background, #ffffff);
  --bg-subtle: var(--vscode-sideBar-background, #f3f3f3);
  --bg-inset: var(--vscode-input-background, #ffffff);
  --surface: var(--vscode-sideBar-background, #f3f3f3);
  --surface-hover: var(--vscode-list-hoverBackground, #e8e8e8);
  --surface-active: var(--vscode-list-activeSelectionBackground, #0060c0);
  --fg: var(--vscode-editor-foreground, #333333);
  --fg-secondary: var(--vscode-descriptionForeground, #717171);
  --fg-muted: var(--vscode-disabledForeground, #a0a0a0);
  --border: var(--vscode-panel-border, #e5e5e5);
  --border-subtle: var(--vscode-widget-border, #e8e8e8);
  --bg-card: var(--vscode-editorWidget-background, #ffffff);
  --shadow: rgba(0, 0, 0, 0.1);
}

body.vscode-high-contrast {
  --bg: var(--vscode-editor-background, #000000);
  --bg-subtle: var(--vscode-sideBar-background, #000000);
  --bg-inset: var(--vscode-input-background, #000000);
  --surface: var(--vscode-sideBar-background, #000000);
  --surface-hover: var(--vscode-list-hoverBackground, #0a0a0a);
  --surface-active: var(--vscode-list-activeSelectionBackground, #0a0a0a);
  --fg: var(--vscode-editor-foreground, #ffffff);
  --fg-secondary: var(--vscode-descriptionForeground, #d4d4d4);
  --fg-muted: var(--vscode-disabledForeground, #a0a0a0);
  --border: var(--vscode-contrastBorder, #6fc3df);
  --border-subtle: var(--vscode-contrastBorder, #6fc3df);
  --bg-card: var(--vscode-editorWidget-background, #000000);
  --shadow: rgba(0, 0, 0, 0.8);
}

/* ================================================================
   BASE STYLES
   ================================================================ */

* {
  font-family: var(--vscode-font-family, 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif);
}

body {
  background-color: var(--bg);
  color: var(--fg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-image:
    radial-gradient(circle at 50% 0%, var(--glow-1) 0%, transparent 50%),
    radial-gradient(circle at 100% 100%, var(--glow-2) 0%, transparent 50%);
  min-height: 100vh;
  margin: 0;
  padding: 0;
  transition: background-color 0.2s ease, color 0.2s ease;
}

/* In VS Code webview, disable background glow (uses editor bg) */
body.vscode-dark,
body.vscode-light,
body.vscode-high-contrast {
  background-image: none;
}

code,
pre {
  font-family: var(--vscode-editor-font-family, 'JetBrains Mono', 'Fira Code', monospace);
}

/* Table cells: no wrapping — tables have horizontal scroll */
table th,
table td {
  white-space: nowrap;
}